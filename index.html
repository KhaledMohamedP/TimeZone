<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Time Zone</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div class="container">
        <div class="clock">
            <div class="bar hourBar"></div>
            <div class="clockCenter"></div>
            <div class="bar minuteBar"></div>
            <div class="controller">
                <!-- Input materials -->
                <div class="clockInput">
                    <input type="text" class="hourInput">
                    <input type="text" class="minuteInput">
                </div>
                <ul class="day">
                    <li class="am active">AM</li>
                    <li class="pm ">PM</li>
                    <li class="open">></li>
                </ul>    
            </div>
        </div>
    </div>
</body>
<script>
var clock = document.getElementsByClassName("clock")[0];

createClock(clock);

function createClock(selector) {
    for (var i = 0; i < 60; i++) {
        var tip = document.createElement("div");
        tip.className = "tip ";

        // If the tip is an hour
        if (i % 5 == 0) {
            tip.className += "hourTip";
            var hourSpan = document.createElement("span");

            // Every 5 tips we get an hour
            var hour = i / 5;
            // if the result is 0 return 12
            var hourText = hour === 0 ? 12 : hour;
            hourSpan.innerHTML = hourText;
            hourSpan.style.transform = "rotate(" + (-i * 6) + "deg)"
            tip.appendChild(hourSpan);

            // Else it's minute
        } else {
            tip.className += "minuteTip";
        }


        tip.style.transform = "rotate(" + (i * 6) + "deg)";
        selector.appendChild(tip);
    };

    // Day: pm/am
    var pm = document.getElementsByClassName('pm')[0];
    var am = document.getElementsByClassName('am')[0];
    pm.onclick = function() {
        pm.className = "pm active";
        am.className = "am";
    };
    am.onclick = function() {
        am.className = "am active";
        pm.className = "pm";
    };


    var hourBar = document.getElementsByClassName('hourBar')[0];
    var minuteBar = document.getElementsByClassName('minuteBar')[0];



    //  Hour input work 
    var hourInput = document.getElementsByClassName('hourInput')[0];
    var minuteInput = document.getElementsByClassName('minuteInput')[0];

    hourInput.onkeyup = function(e) {
        var degree = e.target.value * 30;
        hourBar.style.transform = "rotate(" + degree + "deg)";
    }
    minuteInput.onkeyup = function(e) {
        var degree = minuteInput.value * 6;
        minuteBar.style.transform = "rotate(" + degree + "deg)";
    }

}
</script>

</html>



<!--  Make clock bar moves - TODO 
    // hourBar.onmousedown = function(e){

    //     var x = e.pageX - clock.offsetLeft;
    //     var y = e.pageY - clock.offsetTop;
    //     var r = x / 2; 
    //     degrees = Math.atan2(y,  x) / Math.PI * 180;

    //     // degrees = Math.atan( - x / y ) * 180 / Math.PI,

    //     // this.style.transform = "rotate("+ degrees +"deg)";
    //     console.log("client", degrees, x, y);
    //     // console.log("screen", e.screenX, e.screenY);
    //     console.log(e);
    // }
    //  -->
